<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<script charset="iso-8859-1" src="../../../../../commonlib/trunk/script_js/general.js" type="text/javascript"></script>
<script charset="iso-8859-1" src="../../../../../commonlib/trunk/script_js/edit_filter.js" type="text/javascript"></script>
<link href="{W_CSS}" rel="stylesheet" type="text/css"/>
<style type="text/css">
<!--
body{
	background-color: #E5E5E5;
	text-align:center;
	font-size:14px;
	font-family:Verdana, Arial, Helvetica, sans-serif;
}
.Button{
	font-size: 9px;
    text-align: center;
}
-->
</style>
<script type="text/javascript">
function get_returnVal(){
	var vl_result_nro = "";
	var vl_result_cod = "";
	var vl_result = "";
	var vl_aTR = get_TR('GUIA_DESPACHO');
	
	for(i=0; i < vl_aTR.length; i++){
		var vl_record = get_num_rec_field(vl_aTR[i].id);
	
		var vl_check = document.getElementById('CHK_GUIA_DESPACHO_' + vl_record).checked;
		var vl_cod_guia_despacho = document.getElementById('COD_GUIA_DESPACHO_' + vl_record).value;
		var vl_nro_guia_despacho = document.getElementById('NRO_GUIA_DESPACHO_' + vl_record).innerHTML;
		
		if(vl_check){
			vl_result_nro = vl_result_nro + vl_nro_guia_despacho + "-";
			vl_result_cod = vl_result_cod + vl_cod_guia_despacho + "-";
		}
	}
	
	vl_result_nro = vl_result_nro.substring(0, vl_result_nro.length-1);
	vl_result_cod = vl_result_cod.substring(0, vl_result_cod.length-1);
	
	vl_result = vl_result_cod+'|'+vl_result_nro;	
	return vl_result;
}
// DIALOG Required Code
	var prntWindow = getParentWindowWithDialog(); //$(top)[0];

	var $dlg = prntWindow && prntWindow.$dialog;

	function getParentWindowWithDialog() {
		var p = window.parent;
		var previousParent = p;
		while (p != null) {
			if ($(p.document).find('#iframeDialog').length) return p;

			p = p.parent;

			if (previousParent == p) return null;

			// save previous parent

			previousParent = p;
		}
		return null;
	}

	function setWindowReturnValue(value) {
		if ($dlg) $dlg.returnValue = value;
		window.returnValue = value; // in case popup is called using showModalDialog

	}

	function getWindowReturnValue() {
		// in case popup is called using showModalDialog

		if (!$dlg && window.returnValue != null)
			return window.returnValue;

		return $dlg && $dlg.returnValue;
	}

	if ($dlg) window.dialogArguments = $dlg.dialogArguments;
	if ($dlg) window.close = function() { if ($dlg) $dlg.dialogWindow.dialog('close'); };
	// END of dialog Required Code

    function okMe() {
    	
	returnValue=get_returnVal(); 
	setWindowReturnValue(returnValue);
	$dlg.dialogWindow.dialog('close');
		
	}
    function closeMe() {
        setWindowReturnValue(null);
        $dlg.dialogWindow.dialog('close');
    }
</script>
</head>
<body>
<div class="titulo_tabla_wm">&nbsp;&nbsp;Lista guías de Despacho</div>
<table width="90%" border="0" class="table2" align="center">  		
 	<tr align="center">
   		<td>
			<table rules="none" border="1" width="100%" class="encabezado_center">
				<tr align="center">
					<td align="center" width="8%">Sel.</td>
					<td align="center" width="8%">Nº GD</td>
					<td align="center" width="13%">Fecha</td>
					<td align="center" width="13%">Rut</td>
					<td align="center" width="29%">Razón Social</td>
					<td align="center" width="29%">Referencia</td>
				</tr>
			</table>
			<div style="overflow-x:hidden; overflow-y:auto; height: 200px;">
				<table rules="none" border="1" align="center" width="776" id="GUIA_DESPACHO">
					<!-- startBlock(GUIA_DESPACHO) -->	
					<tr class="{DW_TR_CSS}" id="{DW_TR_ID}">
						<td align="center" width="8%">{CHK_GUIA_DESPACHO}</td>
						<td align="center" width="8%">{COD_GUIA_DESPACHO}{NRO_GUIA_DESPACHO}</td>
						<td align="center" width="13%">{FECHA_GUIA_DESPACHO}</td>
						<td align="center" width="13%">{RUT}</td>
						<td align="left" width="29%">{NOM_EMPRESA}</td>
						<td align="left" width="29%">{REFERENCIA}</td>
					</tr>
					<!-- endBlock(GUIA_DESPACHO) -->		
				</table>
			</div>
		</td>
	</tr>	
</table>	
<table border="0" style="width: 440px" class="table2"> 
	<tr align="left">		
		<td align="center">
			<input class="Button" name="OK" type="button" value="OK" onclick="okMe();"/> 
			<input class="Button" name="Cancelar" type="button" value="Cancelar" onclick="closeMe();"/>
		</td>
 	</tr>	
</table>
</body>
</html>
