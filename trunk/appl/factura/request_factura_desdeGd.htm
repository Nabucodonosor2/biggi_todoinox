<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title></title>
<script charset="iso-8859-1" src="../../../../commonlib/trunk/script_js/general.js" type="text/javascript"></script>
<script charset="iso-8859-1" src="../../../../commonlib/trunk/script_js/edit_filter.js" type="text/javascript"></script>
<link href="{W_CSS}" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
body 
{
	background-color: #E5E5E5;
	text-align:center;
	font-size:14px;
	font-family:Verdana, Arial, Helvetica, sans-serif;
}

.table2{
	font-size: 11px;

}

-->
</style>

<script type="text/javascript">

function valida_cheks()
{	
	var not_chek = 0;
	var aTR = get_TR('GUIA_DESPACHO');
	
	for (var i=0; i<aTR.length; i++) 
	{
		var chequeado=document.getElementById('seleccion_' + i).checked;
		if  (chequeado)		
			not_chek = not_chek;
		else
			not_chek = not_chek + 1;
	}
	
	if(not_chek == aTR.length){
		alert('Debe seleccionar al menos una Guía de Despacho');
		return false;
	}
	
}

function get_returnVal() 
{	
	var cod_nv = document.getElementById('cod_nv').value;
	var result = cod_nv + '-desde_gd |';	
	var aTR = get_TR('GUIA_DESPACHO');
	//alert("aTR.length="+aTR.length);
	for (var i=0; i<aTR.length; i++) 
	{
		var chequeado=document.getElementById('seleccion_' + i).checked;
		var cod_gd = document.getElementById('COD_GUIA_DESPACHO_' + i).value;
		
		if  (chequeado)		
			result = result + cod_gd + "|";		
	}		
	
	return result;
			
		
}
// DIALOG Required Code
	var prntWindow = getParentWindowWithDialog(); //$(top)[0];

	var $dlg = prntWindow && prntWindow.$dialog;

	function getParentWindowWithDialog() {
		var p = window.parent;
		var previousParent = p;
		while (p != null) {
			if ($(p.document).find('#iframeDialog').length) return p;

			p = p.parent;

			if (previousParent == p) return null;

			// save previous parent

			previousParent = p;
		}
		return null;
	}

	function setWindowReturnValue(value) {
		if ($dlg) $dlg.returnValue = value;
		window.returnValue = value; // in case popup is called using showModalDialog

	}

	function getWindowReturnValue() {
		// in case popup is called using showModalDialog

		if (!$dlg && window.returnValue != null)
			return window.returnValue;

		return $dlg && $dlg.returnValue;
	}

	if ($dlg) window.dialogArguments = $dlg.dialogArguments;
	if ($dlg) window.close = function() { if ($dlg) $dlg.dialogWindow.dialog('close'); };
	// END of dialog Required Code

    function okMe() {
    	
	returnValue=get_returnVal(); 
	setWindowReturnValue(returnValue);
	$dlg.dialogWindow.dialog('close');
		
	}
    function closeMe() {
        setWindowReturnValue(null);
        $dlg.dialogWindow.dialog('close');
    }
</script>

</head>

<body >
<div class="titulo_tabla_wm">&nbsp;&nbsp;Guías de Despacho de Nota de Venta N° {COD_NOTA_VENTA} </div>
<form id="form1" name="form1" method="post" action="">
<input name="cod_nv" id="cod_nv" type="hidden" value="{COD_NOTA_VENTA}">
<table width="440" border="0" class="table2">  		
  		<tr align="left">
    		<td>
     			<!-- inicio tabla tecnica oculta-->
				<table border="1" style="width: 840px" class="table2" id="tabla_item_gd" >
					<tr align="center">
						<td  align="center" width="80">Selección</td>
						<td  align="center" width="110">Nº GD</td>
						<td  align="center" width="110">Fecha GD</td>
						<td  align="center" width="280">Razón Social</td>
						<td  align="center" width="280">Referencia</td>
					</tr>
				</table>
				<div style="overflow-x:auto; overflow-y:auto; ">
				<table rules="none" border="1" align="center"  id="GUIA_DESPACHO">
					<!-- startBlock(GUIA_DESPACHO) -->	
					<tr class="{DW_TR_CSS}" id="{DW_TR_ID}" align="center">
						<td  align="center" width="80">							
							<input type="checkbox" name="seleccion" id="seleccion_{i}"/>
							<input type="hidden" id="COD_GUIA_DESPACHO_{i}" name="COD_GUIA_DESPACHO_{i}" value="{COD_GUIA_DESPACHO}"></input>
						</td>
						<td  align="center" width="110">{NRO_GUIA_DESPACHO}</td>
						<td  align="center" width="110">{FECHA_GUIA_DESPACHO}</td>
						<td  align="left" width="280">{NOM_EMPRESA}</td>
						<td  align="left" width="280">{REFERENCIA}</td>
					</tr>
					<!-- endBlock(GUIA_DESPACHO) -->		
				</table>
				</div>
				<!-- fin tabla tecnica oculta-->
			</td>
		</tr>	
	</table>	
				<table border="0" style="width: 440px" class="table2"  > 
					<tr align="left">		
						<td align="center">
							<input name="OK" type="button" value="OK" onMouseDown="valida_cheks();" onclick="okMe();"> 
							<input name="Cancelar" type="button" value="Cancelar" onclick="closeMe();"/>
						</td>
			  		</tr>	
				</table>
				
			
	
</form>
</body>
</html>
